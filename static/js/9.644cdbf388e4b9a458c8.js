webpackJsonp([9],{MNQr:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={data:function(){return{userName:"",userPass:"",errorCount:0,loginError:!1}},watch:{user:function(s){},loginError:function(s){var e=this;s&&setTimeout(function(){e.$data.loginError=!e.$data.loginError},1e3)}},computed:{isSubmit:function(){return!(""!==this.$data.userName&&this.$data.userName.length>=3&&""!==this.$data.userPass&&this.$data.userPass.length>=6)}},methods:{checks:function(s){var e=s.currentTarget.dataset,t=this.$data[e.id],a="";"userName"===e.id?""==t?a="用户名不能为空":t.length<3&&(a="用户名的长度不能小于 3"):"userPass"===e.id&&(""==t?a="密码不能为空":t.length<6&&(a="密码的长度不能小于 6")),""!==a&&this.$message({showClose:!0,message:a,type:"warning"})},goLogin:function(){var s=this,e="";if(""==s.$data.userName?e="用户名不能为空":s.$data.userName.length<3?e="用户名的长度不能小于 3":""==s.$data.userPass?e="密码不能为空":s.$data.userPass.length<6&&(e="密码的长度不能小于 6"),""!==e)return s.$message({showClose:!0,message:e,type:"warning"});s.$API.userLogin({data:{name:s.$data.userName,pass:s.$data.userPass},method:"POST",success:function(e){var t=e.data;1e4===t.code?(s.$message({showClose:!0,message:t.message,type:"success"}),s.$data.user=t.entity.user,s.$STORE.set("user",t.entity.user),s.$store.dispatch("setLogin",!0),s.checkAuth()):(s.$data.loginError=!0,s.$message({showClose:!0,message:t.message,type:"error"}))}})},checkAuth:function(){var s=this;s.$data.user&&s.$data.user.uuid&&s.$API.isAdmin({data:{},method:"POST",success:function(e){var t=e.data,a=s.$route.query;1e4===t.code?(s.$store.dispatch("setAdmin",!0),a.from&&"/admin/login"!==a.from?s.$router.push(a.from):s.$router.push("/admin/index")):(s.$message({showClose:!0,message:t.message,type:"info"}),s.$store.dispatch("setAdmin",!1),s.$router.push("/"))}})}},created:function(){this.$data.user=this.$STORE.get("user"),this.checkAuth()},mounted:function(){}},r={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"wrapper"},[t("div",{staticClass:"row"},[t("div",{staticClass:"center-block "},[t("form",{staticClass:"form-signin",class:s.loginError?"animated shake":"",attrs:{method:"post",id:"login"}},[t("div",{staticClass:"panel panel-default"},[t("div",{staticClass:"panel-heading"},[s._v("欢迎回来")]),s._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"input-group"},[s._m(0),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.userName,expression:"userName"}],staticClass:"form-control",staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入用户名/邮箱",name:"user","data-id":"userName"},domProps:{value:s.userName},on:{blur:s.checks,input:function(e){e.target.composing||(s.userName=e.target.value)}}})])]),s._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"input-group"},[s._m(1),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.userPass,expression:"userPass"}],staticClass:"form-control",staticStyle:{width:"100%"},attrs:{type:"password",placeholder:"请输入密码",name:"pwd","data-id":"userPass"},domProps:{value:s.userPass},on:{blur:s.checks,keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.goLogin(e)},input:function(e){e.target.composing||(s.userPass=e.target.value)}}})])]),s._v(" "),t("el-button",{staticClass:"btn btn-primary btn-block",attrs:{type:"primary",disabled:s.isSubmit},on:{click:s.goLogin}},[s._v("登录")])],1)])])]),s._v(" "),s._m(2)])])},staticRenderFns:[function(){var s=this.$createElement,e=this._self._c||s;return e("span",{staticClass:"input-group-addon"},[e("i",{staticClass:"glyphicon glyphicon-user"})])},function(){var s=this.$createElement,e=this._self._c||s;return e("span",{staticClass:"input-group-addon fs_17"},[e("i",{staticClass:"glyphicon glyphicon-lock"})])},function(){var s=this.$createElement,e=this._self._c||s;return e("p",{staticClass:"text-center"},[e("strong",[this._v("Copyright © 2015-2016\n          "),e("a",{attrs:{href:"http://www.fedte.cc",target:"_blank"}},[this._v("FEDTE 工作室\n          ")]),this._v(".")]),this._v("\n        保留所有权利.")])}]};var i=t("VU/8")(a,r,!1,function(s){t("PDcD")},"data-v-566cae1a",null);e.default=i.exports},PDcD:function(s,e){}});
//# sourceMappingURL=9.644cdbf388e4b9a458c8.js.map