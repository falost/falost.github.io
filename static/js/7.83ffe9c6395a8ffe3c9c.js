webpackJsonp([7],{MNQr:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{userName:"",userPass:"",errorCount:0,loginError:!1}},watch:{user:function(a){},loginError:function(a){var e=this;a&&setTimeout(function(){e.$data.loginError=!e.$data.loginError},1e3)}},computed:{isSubmit:function(){return!(""!==this.$data.userName&&this.$data.userName.length>=3&&""!==this.$data.userPass&&this.$data.userPass.length>=6)}},methods:{checks:function(a){var e=a.currentTarget.dataset,t=this.$data[e.id],s="";"userName"===e.id?""==t?s="用户名不能为空":t.length<3&&(s="用户名的长度不能小于 3"):"userPass"===e.id&&(""==t?s="密码不能为空":t.length<6&&(s="密码的长度不能小于 6")),""!==s&&this.$message({showClose:!0,message:s,type:"warning"})},goLogin:function(){var a=this,e="";if(""==a.$data.userName?e="用户名不能为空":a.$data.userName.length<3?e="用户名的长度不能小于 3":""==a.$data.userPass?e="密码不能为空":a.$data.userPass.length<6&&(e="密码的长度不能小于 6"),""!==e)return a.$message({showClose:!0,message:e,type:"warning"});a.$API.userLogin({data:{name:a.$data.userName,pass:a.$data.userPass},method:"POST",success:function(e){var t=e.data;1e4===t.code?(a.$message({showClose:!0,message:t.message,type:"success"}),a.$data.user=t.entity.user,a.$STORE.set("user",t.entity.user),a.$store.dispatch("setLogin",!0),a.checkAuth()):(a.$data.loginError=!0,a.$message({showClose:!0,message:t.message,type:"error"}))}})},checkAuth:function(){var a=this;a.$data.user&&a.$data.user.uuid&&a.$API.isAdmin({data:{},method:"POST",success:function(e){var t=e.data,s=a.$route.query;1e4===t.code?(a.$store.dispatch("setAdmin",!0),s.from&&"/admin/login"!==s.from?a.$router.push(s.from):a.$router.push("/admin/index")):(a.$message({showClose:!0,message:t.message,type:"info"}),a.$store.dispatch("setAdmin",!1),a.$router.push("/"))}})}},created:function(){this.$data.user=this.$STORE.get("user"),this.checkAuth()},mounted:function(){}},n={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"wrapper"},[t("div",{staticClass:"row"},[t("div",{staticClass:"center-block "},[t("form",{staticClass:"form-signin",class:a.loginError?"animated shake":"",attrs:{method:"post",id:"login"}},[t("div",{staticClass:"panel panel-default"},[t("div",{staticClass:"panel-heading"},[a._v("欢迎回来")]),a._v(" "),t("div",{staticClass:"panel-body"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"input-group"},[a._m(0),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.userName,expression:"userName"}],staticClass:"form-control",staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入用户名/邮箱",name:"user","data-id":"userName"},domProps:{value:a.userName},on:{blur:a.checks,input:function(e){e.target.composing||(a.userName=e.target.value)}}})])]),a._v(" "),t("div",{staticClass:"form-group"},[t("div",{staticClass:"input-group"},[a._m(1),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.userPass,expression:"userPass"}],staticClass:"form-control",staticStyle:{width:"100%"},attrs:{type:"password",placeholder:"请输入密码",name:"pwd","data-id":"userPass"},domProps:{value:a.userPass},on:{blur:a.checks,keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.goLogin(e)},input:function(e){e.target.composing||(a.userPass=e.target.value)}}})])]),a._v(" "),t("el-button",{staticClass:"btn btn-primary btn-block",attrs:{type:"primary",disabled:a.isSubmit},on:{click:a.goLogin}},[a._v("登录")])],1)])])]),a._v(" "),a._m(2)])])},staticRenderFns:[function(){var a=this.$createElement,e=this._self._c||a;return e("span",{staticClass:"input-group-addon"},[e("i",{staticClass:"glyphicon glyphicon-user"})])},function(){var a=this.$createElement,e=this._self._c||a;return e("span",{staticClass:"input-group-addon fs_17"},[e("i",{staticClass:"glyphicon glyphicon-lock"})])},function(){var a=this.$createElement,e=this._self._c||a;return e("p",{staticClass:"text-center"},[e("strong",[this._v("Copyright © 2015-2016\n          "),e("a",{attrs:{href:"http://www.fedte.cc",target:"_blank"}},[this._v("FEDTE 工作室\n          ")]),this._v(".")]),this._v("\n        保留所有权利.")])}]};var r=t("VU/8")(s,n,!1,function(a){t("PDcD")},"data-v-566cae1a",null);e.default=r.exports},PDcD:function(a,e,t){var s=t("oUjE");"string"==typeof s&&(s=[[a.i,s,""]]),s.locals&&(a.exports=s.locals);t("rjj0")("6eb018cc",s,!0,{})},oUjE:function(a,e,t){(a.exports=t("FZ+f")(!0)).push([a.i,"\n.box[data-v-566cae1a] {\n  background-color: #ecf0f5;\n  margin: 0;\n}\n.row[data-v-566cae1a] {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  width: 360px;\n  margin-left: -180px;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.error input[data-v-566cae1a],\n.error > span[data-v-566cae1a],\n.error input[data-v-566cae1a]:focus {\n  border-color: #a94442 !important;\n}\n.error > span[data-v-566cae1a] {\n  color: #a94442;\n  background-color: #f2dede;\n}\n.correct[data-v-566cae1a] {\n  color: #006600;\n  background-color: transparent;\n}\n.btn[disabled][data-v-566cae1a] {\n  pointer-events: auto;\n  cursor: not-allowed;\n}\n@media screen and (max-width: 360px) {\n.row[data-v-566cae1a] {\n    width: 95%;\n    margin-left: -47.5%;\n}\n}\n","",{version:3,sources:["/Users/falost/my/alblog/alblog-web/src/page/admin/admin_login.vue"],names:[],mappings:";AACA;EACE,0BAA0B;EAC1B,UAAU;CACX;AACD;EACE,gBAAgB;EAChB,UAAU;EACV,SAAS;EACT,aAAa;EACb,oBAAoB;EACpB,oCAAoC;EACpC,4BAA4B;CAC7B;AACD;;;EAGE,iCAAiC;CAClC;AACD;EACE,eAAe;EACf,0BAA0B;CAC3B;AACD;EACE,eAAe;EACf,8BAA8B;CAC/B;AACD;EACE,qBAAqB;EACrB,oBAAoB;CACrB;AACD;AACA;IACI,WAAW;IACX,oBAAoB;CACvB;CACA",file:"admin_login.vue",sourcesContent:["\n.box[data-v-566cae1a] {\n  background-color: #ecf0f5;\n  margin: 0;\n}\n.row[data-v-566cae1a] {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  width: 360px;\n  margin-left: -180px;\n  -webkit-transform: translateY(-50%);\n  transform: translateY(-50%);\n}\n.error input[data-v-566cae1a],\n.error > span[data-v-566cae1a],\n.error input[data-v-566cae1a]:focus {\n  border-color: #a94442 !important;\n}\n.error > span[data-v-566cae1a] {\n  color: #a94442;\n  background-color: #f2dede;\n}\n.correct[data-v-566cae1a] {\n  color: #006600;\n  background-color: transparent;\n}\n.btn[disabled][data-v-566cae1a] {\n  pointer-events: auto;\n  cursor: not-allowed;\n}\n@media screen and (max-width: 360px) {\n.row[data-v-566cae1a] {\n    width: 95%;\n    margin-left: -47.5%;\n}\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=7.83ffe9c6395a8ffe3c9c.js.map